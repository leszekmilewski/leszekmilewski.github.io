<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wojna â€“ gra karciana</title>
  <style>
    body {
      font-family: 'Georgia', serif;
      max-width: 700px;
      margin: 0 auto;
      padding: 2rem;
      background-color: #fff;
      color: #111;
      text-align: center;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .cards {
      display: flex;
      justify-content: space-around;
      font-size: 4rem;
      margin: 1rem 0;
    }

    .info {
      margin-top: 1rem;
      font-size: 1rem;
      line-height: 1.6;
    }

    .status {
      margin: 1.5rem 0;
      font-weight: bold;
    }

    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>Wojna â€“ gra karciana</h1>

  <div class="cards">
    <div id="playerCard">ğŸ‚ </div>
    <div id="computerCard">ğŸ‚ </div>
  </div>

  <div class="status" id="status">Kliknij â€Zagraj rundÄ™â€, aby rozpoczÄ…Ä‡</div>
  <button id="playBtn">Zagraj rundÄ™</button>

  <div class="info">
    <div>Twoje karty: <span id="playerCount">26</span></div>
    <div>Karty komputera: <span id="computerCount">26</span></div>
    <div>Liczba rozegranych rund: <span id="roundCount">0</span></div>
  </div>

  <script>
    const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
    const values = Array.from({length: 13}, (_, i) => i + 2); // 2-14 (14 = A)
    let playerDeck = [];
    let computerDeck = [];
    let warPile = [];
    let round = 0;

    function createDeck() {
      const deck = [];
      for (let suit of suits) {
        for (let value of values) {
          deck.push({ value, suit });
        }
      }
      return shuffle(deck);
    }

    function shuffle(deck) {
      for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
      return deck;
    }

    function dealCards() {
      const deck = createDeck();
      playerDeck = deck.slice(0, 26);
      computerDeck = deck.slice(26);
      warPile = [];
      round = 0;
      updateCounts();
      displayCard(document.getElementById('playerCard'), null);
      displayCard(document.getElementById('computerCard'), null);
      document.getElementById('status').textContent = "Gotowy do gry!";
      document.getElementById('roundCount').textContent = round;
    }

    function displayCard(el, card) {
      if (!card) {
        el.textContent = 'ğŸ‚ ';
        return;
      }
      const valueMap = {
        11: 'J',
        12: 'Q',
        13: 'K',
        14: 'A'
      };
      const displayValue = valueMap[card.value] || card.value;
      el.textContent = `${displayValue}${card.suit}`;
    }

    function updateCounts() {
      document.getElementById('playerCount').textContent = playerDeck.length;
      document.getElementById('computerCount').textContent = computerDeck.length;
    }

    function playRound() {
      if (playerDeck.length === 0 || computerDeck.length === 0) {
        document.getElementById('status').textContent =
          playerDeck.length === 0 ? "Koniec gry. Komputer wygrywa!" : "Gratulacje! WygraÅ‚eÅ›!";
        return;
      }

      round++;
      document.getElementById('roundCount').textContent = round;

      let pCard = playerDeck.shift();
      let cCard = computerDeck.shift();

      displayCard(document.getElementById('playerCard'), pCard);
      displayCard(document.getElementById('computerCard'), cCard);

      warPile.push(pCard, cCard);

      if (pCard.value > cCard.value) {
        playerDeck.push(...warPile);
        warPile = [];
        document.getElementById('status').textContent = "Wygrywasz tÄ™ rundÄ™.";
      } else if (cCard.value > pCard.value) {
        computerDeck.push(...warPile);
        warPile = [];
        document.getElementById('status').textContent = "Komputer wygrywa tÄ™ rundÄ™.";
      } else {
        document.getElementById('status').textContent = "Remis â€“ wojna!";
        warSequence();
      }

      updateCounts();
    }

    function warSequence() {
      if (playerDeck.length < 2 || computerDeck.length < 2) {
        document.getElementById('status').textContent = "Koniec â€“ ktoÅ› nie ma doÅ›Ä‡ kart na wojnÄ™!";
        return;
      }

      warPile.push(playerDeck.shift(), computerDeck.shift()); // zakryte
      let pCard = playerDeck.shift();
      let cCard = computerDeck.shift();
      warPile.push(pCard, cCard);

      displayCard(document.getElementById('playerCard'), pCard);
      displayCard(document.getElementById('computerCard'), cCard);

      if (pCard.value > cCard.value) {
        playerDeck.push(...warPile);
        warPile = [];
        document.getElementById('status').textContent = "WygraÅ‚eÅ› wojnÄ™!";
      } else if (cCard.value > pCard.value) {
        computerDeck.push(...warPile);
        warPile = [];
        document.getElementById('status').textContent = "Komputer wygraÅ‚ wojnÄ™.";
      } else {
        document.getElementById('status').textContent = "Kolejny remis â€“ wojna trwa!";
        setTimeout(warSequence, 1000); // rekurencja
      }

      updateCounts();
    }

    document.getElementById('playBtn').addEventListener('click', playRound);

    // Start gry
    dealCards();
  </script>
</body>
</html>
